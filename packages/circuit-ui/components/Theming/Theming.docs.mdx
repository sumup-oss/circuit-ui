import { Story } from '../../../../.storybook/components';

# Theming

Circuit UI supports color theming. It uses semantic color tokens, which can be customized to deviate from the default light theme.

## Semantic color tokens

At the core of Circuit UI theming are semantic color tokens. Instead of referencing color values (as hex codes, for example), Circuit UI components reference semantic color names, which are mapped to a color value depending on the theme.

### Anatomy of a semantic color token

A semantic color is composed of three parts:

- **element**: `foreground`, `background`, `border`
- **role (semantic meaning)**:
  - `default` (e.g. the default background in light mode is white)
  - `subtle`
  - `highlight`
  - role colors: `accent`, `confirm`, `notify`, `alert`
  - on<Role\> colors: `onAccent`, `onConfirm`, etc.
  - role color variants: `accentSubtle`, etc.
- **state**: `idle`, `hover`, `active`

For example:

- `foreground.alert.hover`
- `background.accentSubtle.idle`

Not all combinations exist in the theme: use the theme's type definitions when overriding colors to ensure compatibility for your custom theme.

### Using semantic color tokens in your app

Custom components and styles in all applications should use semantic color tokens, so that theme customizations can be applied with confidence in the future.

## Using theming

### Customizing the theme

The primary benefit of semantic color tokens is that they can be customized _without_ having to override component styles.

Wrap a component subtree in Emotion's [`ThemeProvider`](https://emotion.sh/docs/theming) and pass it the customized theme:

```tsx
import { light, Theme } from '@sumup/design-tokens';

const blackButtonTheme: Theme = {
  ...light,
  colors: {
    ...light.colors,
    background: {
      ...light.colors.background,
      accent: {
        idle: 'black',
        hover: '#333',
        active: '#333',
      },
    },
    border: {
      ...light.colors.border,
      accent: {
        idle: 'black',
        hover: '#333',
        active: '#333',
      },
    },
  },
};

const BlackButton = () => (
  <>
    <Button variant="primary">A default primary button</Button>
    <ThemeProvider theme={blackButtonTheme}>
      <Button variant="primary">A custom primary button</Button>
    </ThemeProvider>
  </>
);
```

<Story id="features-theming--base" />

### Building a full-fledged theme

ðŸš§

### Contrast requirements

When customizing the default theme or designing a new theme, it is fundamental that contrast requirements are met.

- Color roles as backgrounds (e.g. `background.accent.*`) need at least 4.5:1 contrast with the accompanying `on*` foreground colors (e.g. `foreground.onAccent.*`)
- Color roles as foregrounds (e.g. `foreground.accent.*`) need at least 4.5:1 contrast with the default background (`background.default.*`)
- Subtle variants of color role backgrounds (e.g. `background.accentSubtle.*`) need at least 4.5:1 contrast with neutral foreground colors (`foreground.default.*`, `foreground.subtle.*`...)
- ðŸš§
