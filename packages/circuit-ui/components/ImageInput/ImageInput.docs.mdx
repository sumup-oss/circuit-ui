import { Status, Props, Story } from '../../../../.storybook/components';

# ImageInput

<Status.Stable />

The ImageInput component allows users to upload images. It can be used on its own or as part of a form.

<Story id="forms-imageinput--base" />

<Props />

## Usage guidelines

Refer to the `Stateful` component story for a simplified code usage example.

- **Do** use the `onChange` callback to immediately trigger an image upload when the user has selected one, even when the component is being used as part of a form. Faster form submissions add to a delightful user experience.
- **Do not** use the ImageInput component if the image is read-only for the user. Instead, use the visual component from the ImageInput's `component` prop by itself, for example the [Avatar](Components/Avatar).

## Input states

### Existing image

When an `src` prop is provided, the ImageInput renders a "Clear" icon instead of the "Add" icon. It also forwards the prop to the visual component passed as a prop. Clicking the "Clear" icon clears the input.

<Story id="forms-imageinput--with-image" />

### Invalid

When an image upload fails, set the `invalid` prop to true to render invalid styles, and show the user a clear and concise error message using the `validationHint` prop.

<Story id="forms-imageinput--invalid" />

## Custom component

The ImageInput has drop-in support for the [Avatar](Components/Avatar) component as a visual element.

However, a custom component can also be used in other cases to display an ImageInput with different dimensions.

There are some caveats with this approach:

- A custom placeholder will also need to be provided to match the custom aspect ratio. Refer to the `CustomComponent` stories for code examples.
- Currently, the `ImageInput` only supports rectangular components in order to correctly apply state-specific styles. Please omit border-radius styles from your custom components, they will be set to a fixed 12px radius by the ImageInput.

### Using an img element

<Story id="forms-imageinput--custom-component-img" />

### Using a div element

<Story id="forms-imageinput--custom-component-div" />

## Accessibility

### Best practices

#### Error message associated with input field

Error messages should be simple and clear to understand, also provide guidance on how to correct mistakes.
The error messages must be associated with respective controls (e.g. Input field), via `aria-describedby` or labeling.
The screen readers announce the error message with a live region by applying an `aria-live` property.

The `aria-describedby` is added to the Input field, and `aria-invalid="true"` when the error is triggered.
The `aria-live="polite"` indicates that the error message will be announced after completing other announcements first.

### Resources

#### Related articles

- [Testing error messages](https://www.davidmacd.com/blog/test-aria-describedby-errormessage-aria-live.html) Web Accessibility Training
- [Using live regions to identify error messages](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA19.html)
- [Error messages with aria-live] (https://gaurav5430.medium.com/accessibility-quick-wins-error-messages-with-aria-live-7a622cb606f9)
